---
title: 控制反转和依赖注入
date: 2019-05-19 23:17:38
tags:
---

#### IOC容器

Inverse of Control(控制反转)



#### 控制反转

Inversion of Control 是一种面向对象编程的一种设计原则，用来降低计算机代码之间的耦合度，比如：

A依赖于B，一种写法是在类A里面使用`new`创建一个类B的对象，这就是一般所说的**A控制B的创建和销毁**

而*控制反转*则是让A移交出这个创建权给A的外部，由外部（相对于A）**控制B的创建与销毁**。这样就实现了B的创建和生命周期逻辑和A的解耦。

要思考封装和控制反转的微妙关系（一个是聚起来，一个是把创建逻辑分出去）。

#### 依赖注入

通过"控制反转"， 我们把B的控制权转移到A的外部，但是A仍然依赖于B，需要使用B的对象完成一些事情，那么问题来了

**我们如何把外部创建的B的对象交给A呢？**

* 在A的构造方法里把B作为一个参数传给A — 更加清晰
* 使用setter()方法把B传给A — 更加的灵活

这其实就是所谓的**依赖注入**，依赖注入其实就是控制反转的一个实现，差不多也是同一回事

